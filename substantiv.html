<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tudor, gramatica este logica vorbirii!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #0f172a; 
            color: white; 
            overflow-x: hidden; 
        }

        .glass-card { 
            background: rgba(30, 41, 59, 0.7); 
            backdrop-filter: blur(16px); 
            border: 1px solid rgba(255,255,255,0.1); 
            border-radius: 24px; 
        }

        .nav-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .nav-btn.active {
            background: #6366f1;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
            color: white !important;
        }

        .word-tag { 
            background: rgba(99, 102, 241, 0.1); 
            border: 1px dashed rgba(99, 102, 241, 0.4); 
            padding: 2px 6px; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.2s ease; 
            color: #818cf8; 
            font-weight: 700; 
            display: inline-block; 
        }
        .word-tag:hover { background: rgba(99, 102, 241, 0.25); transform: translateY(-1px); }
        .word-tag.active { background: #6366f1; color: white; border-style: solid; }

        .custom-select-trigger {
            background: #1e293b;
            border: 2px solid #334155;
            padding: 14px 20px;
            border-radius: 18px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        .custom-options {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 0;
            right: 0;
            background: #1e293b;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 18px;
            z-index: 100;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            padding: 8px;
            box-shadow: 0 -10px 25px rgba(0,0,0,0.5);
        }
        .open .custom-options { display: block; }

        .score-box {
            font-variant-numeric: tabular-nums;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
    </style>
</head>
<body class="p-4 md:p-6 lg:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Navigation Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-8 glass-card p-4 gap-6">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 shrink-0">
                    <i class="fas fa-graduation-cap text-white"></i>
                </div>
                <div class="overflow-hidden">
                    <h1 class="text-sm md:text-base font-bold tracking-tight leading-none whitespace-nowrap">
                        Tudor, <span class="text-indigo-400">gramatica</span> este logica vorbirii!
                    </h1>
                </div>
            </div>

            <nav class="flex bg-slate-900/50 p-1 rounded-2xl border border-white/5">
                <button onclick="showView('analizator')" id="nav-analizator" class="nav-btn active px-6 py-2 rounded-xl text-xs font-bold uppercase tracking-widest text-slate-400">Analizator (20 Texte)</button>
                <button onclick="showView('dashboard')" id="nav-dashboard" class="nav-btn px-6 py-2 rounded-xl text-xs font-bold uppercase tracking-widest text-slate-400">Tablou Cazuri</button>
            </nav>

            <div class="flex items-center gap-4">
                <div class="flex items-center gap-3 bg-slate-900/80 px-4 py-2 rounded-xl border border-white/10 text-xs font-bold">
                    <div class="text-emerald-400 score-box"><i class="fas fa-check mr-1"></i> <span id="score-correct">0</span></div>
                    <div class="w-px h-4 bg-white/10"></div>
                    <div class="text-red-400 score-box"><i class="fas fa-times mr-1"></i> <span id="score-wrong">0</span></div>
                </div>
                <button onclick="resetScore()" class="w-8 h-8 rounded-lg bg-slate-800 hover:bg-red-500/20 hover:text-red-400 transition-colors flex items-center justify-center border border-white/5" title="Resetează Scorul">
                    <i class="fas fa-redo-alt text-xs"></i>
                </button>
            </div>
        </header>

        <!-- VIEW 1: ANALIZATOR (Principal) -->
        <div id="view-analizator" class="grid lg:grid-cols-12 gap-8">
            <div class="lg:col-span-8">
                <div class="glass-card p-10 min-h-[500px] flex flex-col relative overflow-hidden">
                    
                    <!-- Text Navigation -->
                    <div class="flex justify-between items-center mb-6 border-b border-white/5 pb-4">
                        <div id="author-tag" class="inline-flex items-center gap-2 text-[10px] font-black text-indigo-400 bg-indigo-500/10 px-4 py-2 rounded-full border border-indigo-500/20 uppercase tracking-widest">
                            <i class="fas fa-pen-nib"></i> <span>Sursa</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="changeText(-1)" class="w-8 h-8 rounded-lg bg-slate-800 hover:bg-indigo-600 transition-colors flex items-center justify-center text-xs"><i class="fas fa-chevron-left"></i></button>
                            <span id="progress-text" class="px-3 font-black text-indigo-400 tabular-nums text-xs">01 / 20</span>
                            <button onclick="changeText(1)" class="w-8 h-8 rounded-lg bg-slate-800 hover:bg-indigo-600 transition-colors flex items-center justify-center text-xs"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>

                    <div id="text-content" class="text-xl md:text-2xl leading-[2.2] text-slate-100 font-medium tracking-wide"></div>
                </div>
            </div>

            <div class="lg:col-span-4">
                <div id="quiz-ui" class="glass-card p-8 border-t-8 border-indigo-600 hidden sticky top-8">
                    <div class="flex items-center gap-3 mb-6">
                        <span class="w-8 h-8 rounded-full bg-indigo-600/30 flex items-center justify-center text-xs text-indigo-300"><i class="fas fa-search"></i></span>
                        <div>
                            <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Analizezi cuvântul:</p>
                            <h3 id="target-word" class="text-2xl font-black text-white italic">---</h3>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="relative" id="custom-select">
                            <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 block">Alege Funcția Corectă</label>
                            <div class="custom-select-trigger" onclick="toggleDropdown()">
                                <span id="selected-label" class="text-sm truncate">Selectează...</span>
                                <i class="fas fa-chevron-down text-indigo-400 text-xs"></i>
                            </div>
                            <div class="custom-options" id="dropdown-options"></div>
                        </div>

                        <div id="feedback" class="rounded-2xl p-4 font-bold text-xs hidden leading-relaxed border-l-4"></div>
                    </div>
                </div>

                <div id="placeholder-ui" class="glass-card p-10 h-full flex flex-col items-center justify-center text-center opacity-40 border-2 border-dashed border-slate-700">
                    <i class="fas fa-mouse-pointer text-4xl mb-4 animate-bounce text-slate-500"></i>
                    <p class="text-xs font-black uppercase tracking-widest leading-loose text-slate-400">Apasă pe cuvintele albastre<br>din textul alăturat</p>
                </div>
            </div>
        </div>

        <!-- VIEW 2: DASHBOARD CAZURI (Tablou complet) -->
        <div id="view-dashboard" class="hidden space-y-6">
            <h2 class="text-2xl font-black mb-4 flex items-center gap-2"><i class="fas fa-th-large text-indigo-500"></i> Tablou Sinoptic Cazuri</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Nominativ -->
                <div class="glass-card p-6 border-t-4 border-blue-500">
                    <h3 class="text-blue-400 font-black text-lg mb-4 uppercase flex justify-between">Nominativ (N) <span class="text-[10px] bg-blue-900 px-2 rounded flex items-center">Cine? Ce?</span></h3>
                    <div class="space-y-3 text-sm">
                        <div class="border-b border-white/5 pb-2"><p class="text-white font-bold">Subiect</p><p class="text-slate-400 text-xs italic">Cine face acțiunea?</p></div>
                        <div class="border-b border-white/5 pb-2"><p class="text-white font-bold">Nume Predicativ</p><p class="text-slate-400 text-xs italic">Cine/Ce este? (după vb. copulativ)</p></div>
                        <div><p class="text-white font-bold">Atribut Apozițional</p><p class="text-slate-400 text-xs italic">Care? (explică un alt substantiv)</p></div>
                    </div>
                </div>

                <!-- Acuzativ -->
                <div class="glass-card p-6 border-t-4 border-emerald-500">
                    <h3 class="text-emerald-400 font-black text-lg mb-4 uppercase flex justify-between">Acuzativ (Ac) <span class="text-[10px] bg-emerald-900 px-2 rounded flex items-center">Pe cine? Ce?</span></h3>
                    <div class="space-y-2 text-xs">
                        <p class="flex justify-between py-1 border-b border-white/5"><span>Compl. Direct</span> <span class="text-slate-400 font-bold">Pe cine? Ce?</span></p>
                        <p class="flex justify-between py-1 border-b border-white/5"><span>Compl. Prepozițional</span> <span class="text-slate-400 font-bold">La/Cu/Despre cine/ce?</span></p>
                        <p class="flex justify-between py-1 border-b border-white/5"><span>Atribut Subst. Prep.</span> <span class="text-slate-400 font-bold">Care? Ce fel de?</span></p>
                        <p class="flex justify-between py-1 border-b border-white/5"><span>Circ. de Loc</span> <span class="text-slate-400 font-bold">Unde? Încotro?</span></p>
                        <p class="flex justify-between py-1 border-b border-white/5"><span>Circ. de Timp</span> <span class="text-slate-400 font-bold">Când? Cât timp?</span></p>
                        <p class="flex justify-between py-1 border-b border-white/5"><span>Circ. de Mod</span> <span class="text-slate-400 font-bold">Cum? În ce fel?</span></p>
                    </div>
                </div>

                <!-- Genitiv -->
                <div class="glass-card p-6 border-t-4 border-orange-500">
                    <h3 class="text-orange-400 font-black text-lg mb-4 uppercase flex justify-between">Genitiv (G) <span class="text-[10px] bg-orange-900 px-2 rounded flex items-center">A cui?</span></h3>
                    <div class="space-y-3 text-sm">
                        <div class="border-b border-white/5 pb-2"><p class="text-white font-bold">Atribut Subst. Genitival</p><p class="text-slate-400 text-xs italic">Al, a, ai, ale cui?</p></div>
                        <div class="border-b border-white/5 pb-2"><p class="text-white font-bold">Atribut Subst. Prep.</p><p class="text-slate-400 text-xs italic">Contra cui? Împotriva cui?</p></div>
                        <div class="border-b border-white/5 pb-2"><p class="text-white font-bold">Circ. Loc / Timp</p><p class="text-slate-400 text-xs italic">Deasupra? Înaintea?</p></div>
                    </div>
                </div>

                <!-- Dativ -->
                <div class="glass-card p-6 border-t-4 border-purple-500">
                    <h3 class="text-purple-400 font-black text-lg mb-4 uppercase flex justify-between">Dativ (D) <span class="text-[10px] bg-purple-900 px-2 rounded flex items-center">Cui?</span></h3>
                    <div class="space-y-3 text-sm">
                        <div class="border-b border-white/5 pb-2"><p class="text-white font-bold">Complement Indirect</p><p class="text-slate-400 text-xs italic">Cui îi dau/spun?</p></div>
                        <div class="border-b border-white/5 pb-2"><p class="text-white font-bold">Atribut Substantival</p><p class="text-slate-400 text-xs italic">Cui? (ex: nepot bunicului)</p></div>
                        <div class="border-b border-white/5 pb-2"><p class="text-white font-bold">Circ. de Mod</p><p class="text-slate-400 text-xs italic">Conform cui? Asemenea cui?</p></div>
                    </div>
                </div>

                <!-- Vocativ -->
                <div class="glass-card p-6 border-t-4 border-pink-500">
                    <h3 class="text-pink-400 font-black text-lg mb-4 uppercase">Vocativ (V)</h3>
                    <div class="p-4 bg-pink-500/10 rounded-xl border border-pink-500/20 text-center">
                        <p class="text-pink-200 font-bold mb-2">FĂRĂ FUNCȚIE SINTACTICĂ!</p>
                        <p class="text-xs text-slate-300">Exprimă o strigare sau o adresare directă.</p>
                        <p class="mt-2 text-[10px] text-pink-400 font-bold">Ex: "Ioane, vino!"</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const database = [
            { id: "01", author: "Ion Creangă", text: "Stau câteodată și-mi aduc aminte ce <span class='word-tag' data-id='0'>vremuri</span> și ce <span class='word-tag' data-id='1'>oameni</span> mai erau în <span class='word-tag' data-id='2'>părțile</span> noastre, pe când începusem și eu a mă ridica băiețaș la <span class='word-tag' data-id='3'>casa</span> <span class='word-tag' data-id='4'>părinților</span> mei.",
              questions: [{ w: "vremuri", c: "Subiect (N)", q: "Ce mai erau?" }, { w: "oameni", c: "Subiect (N)", q: "Cine mai erau?" }, { w: "părțile", c: "Circumstanțial de Loc (Ac)", q: "Unde?" }, { w: "casa", c: "Circumstanțial de Loc (Ac)", q: "Unde?" }, { w: "părinților", c: "Atribut Substantival Genitival (G)", q: "A cui casă?" }] },
            { id: "02", author: "Mihail Sadoveanu", text: "<span class='word-tag' data-id='0'>Vitoria</span> privea <span class='word-tag' data-id='1'>muntele</span> cu <span class='word-tag' data-id='2'>neliniște</span>, așteptând <span class='word-tag' data-id='3'>un semn</span> de la <span class='word-tag' data-id='4'>Dumnezeu</span>. Ochii <span class='word-tag' data-id='5'>muntencei</span> căutau <span class='word-tag' data-id='6'>urmele</span>.",
              questions: [{ w: "Vitoria", c: "Subiect (N)", q: "Cine privea?" }, { w: "muntele", c: "Complement Direct (Ac)", q: "Ce privea?" }, { w: "neliniște", c: "Circumstanțial de Mod (Ac)", q: "Cum privea?" }, { w: "un semn", c: "Complement Direct (Ac)", q: "Ce aștepta?" }, { w: "Dumnezeu", c: "Complement Prepozițional (Ac)", q: "De la cine?" }, { w: "muntencei", c: "Atribut Substantival Genitival (G)", q: "Ai cui ochi?" }, { w: "urmele", c: "Complement Direct (Ac)", q: "Ce căutau?" }] },
            { id: "03", author: "Ioan Slavici", text: "<span class='word-tag' data-id='0'>Omul</span> să fie mulțumit cu <span class='word-tag' data-id='1'>sărăcia</span> sa, căci nu <span class='word-tag' data-id='2'>bogăția</span>, ci <span class='word-tag' data-id='3'>liniștea</span> <span class='word-tag' data-id='4'>colibei</span> tale te face fericit.",
              questions: [{ w: "Omul", c: "Subiect (N)", q: "Cine să fie mulțumit?" }, { w: "sărăcia", c: "Complement Prepozițional (Ac)", q: "Cu ce?" }, { w: "bogăția", c: "Subiect (N)", q: "Ce te face fericit?" }, { w: "liniștea", c: "Subiect (N)", q: "Ce te face fericit?" }, { w: "colibei", c: "Atribut Substantival Genitival (G)", q: "A cui liniște?" }] },
            { id: "04", author: "Liviu Rebreanu", text: "<span class='word-tag' data-id='0'>Ion</span> iubea <span class='word-tag' data-id='1'>pământul</span> ca pe <span class='word-tag' data-id='2'>o ibovnică</span>. <span class='word-tag' data-id='3'>Glasul</span> <span class='word-tag' data-id='4'>gliei</span> pătrundea în <span class='word-tag' data-id='5'>sufletul</span> <span class='word-tag' data-id='6'>flăcăului</span>.",
              questions: [{ w: "Ion", c: "Subiect (N)", q: "Cine iubea?" }, { w: "pământul", c: "Complement Direct (Ac)", q: "Ce iubea?" }, { w: "o ibovnică", c: "Circumstanțial de Mod (Ac)", q: "Cum iubea?" }, { w: "Glasul", c: "Subiect (N)", q: "Ce pătrundea?" }, { w: "gliei", c: "Atribut Substantival Genitival (G)", q: "Al cui glas?" }, { w: "sufletul", c: "Circumstanțial de Loc (Ac)", q: "Unde pătrundea?" }, { w: "flăcăului", c: "Atribut Substantival Genitival (G)", q: "Al cui suflet?" }] },
            { id: "05", author: "George Coșbuc", text: "Pe <span class='word-tag' data-id='0'>uliță</span>, <span class='word-tag' data-id='1'>lumea</span> se oprește la <span class='word-tag' data-id='2'>vorbă</span>. <span class='word-tag' data-id='3'>Copiii</span> râd, iar <span class='word-tag' data-id='4'>câinii</span> latră de după <span class='word-tag' data-id='5'>garduri</span>.",
              questions: [{ w: "uliță", c: "Circumstanțial de Loc (Ac)", q: "Unde?" }, { w: "lumea", c: "Subiect (N)", q: "Cine se oprește?" }, { w: "vorbă", c: "Complement Prepozițional (Ac)", q: "La ce?" }, { w: "Copiii", c: "Subiect (N)", q: "Cine râd?" }, { w: "câinii", c: "Subiect (N)", q: "Cine latră?" }, { w: "garduri", c: "Circumstanțial de Loc (Ac)", q: "De unde?" }] },
            { id: "06", author: "Vasile Alecsandri", text: "În <span class='word-tag' data-id='0'>văzduh</span> e <span class='word-tag' data-id='1'>veselie</span>, <span class='word-tag' data-id='2'>soarele</span> strălucește deasupra <span class='word-tag' data-id='3'>lumii</span> și <span class='word-tag' data-id='4'>zilele</span> devin <span class='word-tag' data-id='5'>serbări</span>.",
              questions: [{ w: "văzduh", c: "Circumstanțial de Loc (Ac)", q: "Unde?" }, { w: "veselie", c: "Subiect (N)", q: "Ce este?" }, { w: "soarele", c: "Subiect (N)", q: "Cine strălucește?" }, { w: "lumii", c: "Circumstanțial de Loc (G)", q: "Deasupra cui?" }, { w: "zilele", c: "Subiect (N)", q: "Cine devin?" }, { w: "serbări", c: "Nume Predicativ (N)", q: "Ce devin?" }] },
            { id: "07", author: "Costache Negruzzi", text: "<span class='word-tag' data-id='0'>Domnul</span> a dat <span class='word-tag' data-id='1'>semn</span> <span class='word-tag' data-id='2'>boierilor</span> să intre. <span class='word-tag' data-id='3'>Moțoc</span>, <span class='word-tag' data-id='4'>trădătorule</span>, nu vei scăpa!",
              questions: [{ w: "Domnul", c: "Subiect (N)", q: "Cine a dat?" }, { w: "semn", c: "Complement Direct (Ac)", q: "Ce a dat?" }, { w: "boierilor", c: "Complement Indirect (D)", q: "Cui a dat?" }, { w: "Moțoc", c: "Vocativ (fără funcție)", q: "Strigare" }, { w: "trădătorule", c: "Vocativ (fără funcție)", q: "Strigare" }] },
            { id: "08", author: "Ion Luca Caragiale", text: "<span class='word-tag' data-id='0'>Goe</span>, puișorule, nu scoate <span class='word-tag' data-id='1'>capul</span> pe <span class='word-tag' data-id='2'>fereastră</span>, că dăm <span class='word-tag' data-id='3'>parale</span> <span class='word-tag' data-id='4'>controlorului</span>.",
              questions: [{ w: "Goe", c: "Vocativ (fără funcție)", q: "Strigare" }, { w: "capul", c: "Complement Direct (Ac)", q: "Ce să nu scoată?" }, { w: "fereastră", c: "Circumstanțial de Loc (Ac)", q: "Pe unde?" }, { w: "parale", c: "Complement Direct (Ac)", q: "Ce dăm?" }, { w: "controlorului", c: "Complement Indirect (D)", q: "Cui dăm?" }] },
            { id: "09", author: "Mihai Eminescu", text: "Cobori în <span class='word-tag' data-id='0'>jos</span>, <span class='word-tag' data-id='1'>luceafăr</span> blând, alunecând pe-o <span class='word-tag' data-id='2'>rază</span>, pătrunde-n <span class='word-tag' data-id='3'>casă</span> și în <span class='word-tag' data-id='4'>gând</span>.",
              questions: [{ w: "jos", c: "Circumstanțial de Loc (Ac)", q: "Unde?" }, { w: "luceafăr", c: "Vocativ (fără funcție)", q: "Strigare" }, { w: "rază", c: "Circumstanțial de Loc (Ac)", q: "Pe unde?" }, { w: "casă", c: "Circumstanțial de Loc (Ac)", q: "Unde?" }, { w: "gând", c: "Circumstanțial de Loc (Ac)", q: "Unde?" }] },
            { id: "10", author: "Camil Petrescu", text: "<span class='word-tag' data-id='0'>Ștefan</span> privea <span class='word-tag' data-id='1'>războiul</span> ca pe <span class='word-tag' data-id='2'>un examen</span> al <span class='word-tag' data-id='3'>conștiinței</span>. <span class='word-tag' data-id='4'>Iubirea</span> îi părea <span class='word-tag' data-id='5'>departe</span>.",
              questions: [{ w: "Ștefan", c: "Subiect (N)", q: "Cine privea?" }, { w: "războiul", c: "Complement Direct (Ac)", q: "Ce privea?" }, { w: "un examen", c: "Complement Prepozițional (Ac)", q: "Ca pe ce?" }, { w: "conștiinței", c: "Atribut Substantival Genitival (G)", q: "Al cui examen?" }, { w: "Iubirea", c: "Subiect (N)", q: "Ce îi părea?" }, { w: "departe", c: "Nume Predicativ (Ac)", q: "Cum părea?" }] },
            { id: "11", author: "Barbu Ștefănescu Delavrancea", text: "<span class='word-tag' data-id='0'>Hagi-Tudose</span> își număra <span class='word-tag' data-id='1'>banii</span> la <span class='word-tag' data-id='2'>lumina</span> <span class='word-tag' data-id='3'>lumânării</span>. <span class='word-tag' data-id='4'>Sufletul</span> <span class='word-tag' data-id='5'>zgârcitului</span> era pustiu.",
              questions: [{ w: "Hagi-Tudose", c: "Subiect (N)", q: "Cine număra?" }, { w: "banii", c: "Complement Direct (Ac)", q: "Ce număra?" }, { w: "lumina", c: "Circumstanțial de Timp (Ac)", q: "Când?" }, { w: "lumânării", c: "Atribut Substantival Genitival (G)", q: "A cui lumină?" }, { w: "Sufletul", c: "Subiect (N)", q: "Ce era pustiu?" }, { w: "zgârcitului", c: "Atribut Substantival Genitival (G)", q: "Al cui suflet?" }] },
            { id: "12", author: "Duiliu Zamfirescu", text: "<span class='word-tag' data-id='0'>Sasa</span> și <span class='word-tag' data-id='1'>Comăneșteanu</span> se plimbau prin <span class='word-tag' data-id='2'>grădina</span> plină de <span class='word-tag' data-id='3'>flori</span>. <span class='word-tag' data-id='4'>Viața</span> la <span class='word-tag' data-id='5'>țară</span> era <span class='word-tag' data-id='6'>o bucurie</span>.",
              questions: [{ w: "Sasa", c: "Subiect (N)", q: "Cine se plimbau?" }, { w: "Comăneșteanu", c: "Subiect (N)", q: "Cine se plimbau?" }, { w: "grădina", c: "Circumstanțial de Loc (Ac)", q: "Pe unde?" }, { w: "flori", c: "Atribut Substantival Prepozițional (Ac)", q: "Plină de ce?" }, { w: "Viața", c: "Subiect (N)", q: "Ce era o bucurie?" }, { w: "țară", c: "Atribut Substantival Prepozițional (Ac)", q: "Care viață?" }, { w: "o bucurie", c: "Nume Predicativ (N)", q: "Ce era viața?" }] },
            { id: "13", author: "G. Călinescu", text: "<span class='word-tag' data-id='0'>Otilia</span> era <span class='word-tag' data-id='1'>enigma</span> <span class='word-tag' data-id='2'>casei</span>. <span class='word-tag' data-id='3'>Felix</span> o privea pe <span class='word-tag' data-id='4'>fată</span> cu <span class='word-tag' data-id='5'>admirație</span>.",
              questions: [{ w: "Otilia", c: "Subiect (N)", q: "Cine era?" }, { w: "enigma", c: "Nume Predicativ (N)", q: "Ce era Otilia?" }, { w: "casei", c: "Atribut Substantival Genitival (G)", q: "A cui enigmă?" }, { w: "Felix", c: "Subiect (N)", q: "Cine privea?" }, { w: "fată", c: "Complement Direct (Ac)", q: "Pe cine privea?" }, { w: "admirație", c: "Circumstanțial de Mod (Ac)", q: "Cum privea?" }] },
            { id: "14", author: "Tudor Arghezi", text: "Am luat <span class='word-tag' data-id='0'>ceasul</span> de-ntâlnire, când se tulbură <span class='word-tag' data-id='1'>fundul</span> <span class='word-tag' data-id='2'>apei</span>. <span class='word-tag' data-id='3'>Doamne</span>, fă <span class='word-tag' data-id='4'>cuvântul</span> <span class='word-tag' data-id='5'>fapta</span> mea!",
              questions: [{ w: "ceasul", c: "Complement Direct (Ac)", q: "Ce am luat?" }, { w: "fundul", c: "Subiect (N)", q: "Ce se tulbură?" }, { w: "apei", c: "Atribut Substantival Genitival (G)", q: "Al cui fund?" }, { w: "Doamne", c: "Vocativ (fără funcție)", q: "Strigare" }, { w: "cuvântul", c: "Complement Direct (Ac)", q: "Ce fă?" }, { w: "fapta", c: "Nume Predicativ (Ac)", q: "Ce să faci cuvântul?" }] },
            { id: "15", author: "Nichita Stănescu", text: "<span class='word-tag' data-id='0'>Leoaica</span> tânără, <span class='word-tag' data-id='1'>iubirea</span>, mi-a sărit în <span class='word-tag' data-id='2'>față</span>. M-a mușcat de <span class='word-tag' data-id='3'>față</span>.",
              questions: [{ w: "Leoaica", c: "Subiect (N)", q: "Cine a sărit?" }, { w: "iubirea", c: "Atribut Apozițional (N)", q: "Care leoaică?" }, { w: "față", c: "Circumstanțial de Loc (Ac)", q: "Unde a sărit?" }, { w: "față", c: "Complement Prepozițional (Ac)", q: "De ce m-a mușcat?" }] },
            { id: "16", author: "Lucian Blaga", text: "Eu nu strivesc <span class='word-tag' data-id='0'>corola</span> de <span class='word-tag' data-id='1'>minuni</span> a <span class='word-tag' data-id='2'>lumii</span> and nu ucid cu <span class='word-tag' data-id='3'>mintea</span> <span class='word-tag' data-id='4'>tainele</span>.",
              questions: [{ w: "corola", c: "Complement Direct (Ac)", q: "Ce nu strivesc?" }, { w: "minuni", c: "Atribut Substantival Prepozițional (Ac)", q: "Ce fel de corolă?" }, { w: "lumii", c: "Atribut Substantival Genitival (G)", q: "A cui corolă?" }, { w: "mintea", c: "Circumstanțial de Mod (Ac)", q: "Cu ce nu ucid?" }, { w: "tainele", c: "Complement Direct (Ac)", q: "Ce nu ucid?" }] },
            { id: "17", author: "Mircea Eliade", text: "<span class='word-tag' data-id='0'>Allan</span>, <span class='word-tag' data-id='1'>englezul</span>, o iubea pe <span class='word-tag' data-id='2'>Maitreyi</span>. El a dat <span class='word-tag' data-id='3'>fetei</span> <span class='word-tag' data-id='4'>inima</span>.",
              questions: [{ w: "Allan", c: "Subiect (N)", q: "Cine iubea?" }, { w: "englezul", c: "Atribut Apozițional (N)", q: "Care Allan?" }, { w: "Maitreyi", c: "Complement Direct (Ac)", q: "Pe cine iubea?" }, { w: "fetei", c: "Complement Indirect (D)", q: "Cui a dat?" }, { w: "inima", c: "Complement Direct (Ac)", q: "Ce a dat?" }] },
            { id: "18", author: "Mateiu Caragiale", text: "<span class='word-tag' data-id='0'>Craii</span> se adunau la <span class='word-tag' data-id='1'>Curtea-Veche</span>. <span class='word-tag' data-id='2'>Pașadia</span> era <span class='word-tag' data-id='3'>un nobil</span> al <span class='word-tag' data-id='4'>vremurilor</span> apuse.",
              questions: [{ w: "Craii", c: "Subiect (N)", q: "Cine se adunau?" }, { w: "Curtea-Veche", c: "Circumstanțial de Loc (Ac)", q: "Unde?" }, { w: "Pașadia", c: "Subiect (N)", q: "Cine era?" }, { w: "un nobil", c: "Nume Predicativ (N)", q: "Ce era?" }, { w: "vremurilor", c: "Atribut Substantival Genitival (G)", q: "Ai cui nobili?" }] },
            { id: "19", author: "Marin Preda", text: "<span class='word-tag' data-id='0'>Timpul</span> nu mai avea <span class='word-tag' data-id='1'>răbdare</span>. <span class='word-tag' data-id='2'>Moromete</span> stătea pe <span class='word-tag' data-id='3'>stănoagă</span> și fuma.",
              questions: [{ w: "Timpul", c: "Subiect (N)", q: "Cine nu mai avea?" }, { w: "răbdare", c: "Complement Direct (Ac)", q: "Ce nu mai avea?" }, { w: "Moromete", c: "Subiect (N)", q: "Cine stătea?" }, { w: "stănoagă", c: "Circumstanțial de Loc (Ac)", q: "Unde stătea?" }] },
            { id: "20", author: "George Bacovia", text: "Dormeau adânc <span class='word-tag' data-id='0'>sicriele</span> de <span class='word-tag' data-id='1'>plumb</span>. <span class='word-tag' data-id='2'>Vântul</span> scârțâia prin <span class='word-tag' data-id='3'>ferestre</span>.",
              questions: [{ w: "sicriele", c: "Subiect (N)", q: "Cine dormeau?" }, { w: "plumb", c: "Atribut Substantival Prepozițional (Ac)", q: "Ce fel de sicrie?" }, { w: "Vântul", c: "Subiect (N)", q: "Cine scârțâia?" }, { w: "ferestre", c: "Circumstanțial de Loc (Ac)", q: "Pe unde?" }] }
        ];

        const allFunctii = [
            "Subiect (N)", "Nume Predicativ (N)", "Atribut Apozițional (N)",
            "Complement Direct (Ac)", "Complement Prepozițional (Ac)", "Atribut Substantival Prepozițional (Ac)",
            "Circumstanțial de Loc (Ac)", "Circumstanțial de Timp (Ac)", "Circumstanțial de Mod (Ac)", "Nume Predicativ (Ac)",
            "Atribut Substantival Genitival (G)", "Circumstanțial de Loc (G)",
            "Complement Indirect (D)", 
            "Vocativ (fără funcție)"
        ];

        let currentIdx = 0;
        let activeQuestion = null;
        let score = { correct: 0, wrong: 0 };

        function showView(viewId) {
            document.querySelectorAll('#view-analizator, #view-dashboard').forEach(v => v.classList.add('hidden'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`view-${viewId}`).classList.remove('hidden');
            document.getElementById(`nav-${viewId}`).classList.add('active');
            if (viewId === 'analizator') render();
        }

        function toggleDropdown() { document.getElementById('custom-select').classList.toggle('open'); }

        function selectOption(val) {
            document.getElementById('selected-label').innerText = val;
            document.getElementById('custom-select').classList.remove('open');
            handleSelection(val);
        }

        function handleSelection(val) {
            if (!activeQuestion) return;
            const fb = document.getElementById('feedback');
            fb.style.display = "block";
            
            const selected = val.trim();
            const correct = activeQuestion.c.trim();

            if(selected === correct) {
                score.correct++;
                fb.className = "rounded-2xl p-4 font-bold text-xs bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 border-l-4 mb-4";
                fb.innerHTML = `<div class="flex gap-2"><i class="fas fa-check-circle mt-1"></i> <span>BRAVO! ${activeQuestion.q}</span></div>`;
            } else {
                score.wrong++;
                fb.className = "rounded-2xl p-4 font-bold text-xs bg-red-500/10 text-red-400 border border-red-500/20 border-l-4 mb-4";
                fb.innerHTML = `<div class="flex gap-2"><i class="fas fa-times-circle mt-1"></i> <span>GREȘIT! Răspuns corect: ${activeQuestion.c}. Întreabă: ${activeQuestion.q}</span></div>`;
            }
            updateScoreUI();
        }

        function updateScoreUI() {
            document.getElementById('score-correct').innerText = score.correct;
            document.getElementById('score-wrong').innerText = score.wrong;
        }

        function resetScore() {
            score = { correct: 0, wrong: 0 };
            updateScoreUI();
        }

        function render() {
            const data = database[currentIdx];
            document.getElementById('author-tag').querySelector('span').innerText = data.author;
            document.getElementById('text-content').innerHTML = data.text;
            document.getElementById('progress-text').innerText = `${String(currentIdx + 1).padStart(2, '0')} / ${String(database.length).padStart(2, '0')}`;
            document.getElementById('quiz-ui').classList.add('hidden');
            document.getElementById('placeholder-ui').classList.remove('hidden');
            
            document.querySelectorAll('.word-tag').forEach(tag => {
                tag.onclick = function() {
                    document.querySelectorAll('.word-tag').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    setupQuiz(this.dataset.id, this.innerText);
                };
            });
        }

        function setupQuiz(id, wordText) {
            activeQuestion = database[currentIdx].questions.find(q => q.w.toLowerCase() === wordText.toLowerCase());
            
            if(!activeQuestion) return;

            document.getElementById('target-word').innerText = activeQuestion.w;
            document.getElementById('quiz-ui').classList.remove('hidden');
            document.getElementById('placeholder-ui').classList.add('hidden');
            document.getElementById('feedback').style.display = "none";
            document.getElementById('selected-label').innerText = "Selectează...";
            
            const opts = document.getElementById('dropdown-options');
            opts.innerHTML = allFunctii.sort().map(o => `<div class="p-3 hover:bg-indigo-600/20 cursor-pointer rounded-lg text-xs font-bold text-slate-300 transition-colors border-b border-white/5 last:border-0" onclick="selectOption('${o}')">${o}</div>`).join('');
        }

        function changeText(n) {
            currentIdx = (currentIdx + n + database.length) % database.length;
            render();
        }

        window.onclick = e => { if (!e.target.closest('#custom-select')) document.getElementById('custom-select')?.classList.remove('open'); }
        window.onload = () => { render(); };
    </script>
</body>
</html>
